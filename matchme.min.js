(function(glob){function Matcher(a,b){this.opts=b||{},this.target=a,this.ok=!0}function matchme(a,b,c){var d;if(typeof b=="string"||b instanceof String)c=b,b={};return d=new Matcher(a,b),typeof c!="undefined"?d.query(c).ok:d}var version="!{pkg:version}",reExpr=/([\w\.]+)\s*([\>\<\!\=]\=?)\s*([\w\.]+)/,reBool=/^(true|false)$/i,reFalsyWords=/(undefined|null|false)/g,reTruthyWords=/(true)/g,reWords=/(\w{2,})/,exprLookups={"==":["equals"],">":["gt"],">=":["gte"],"<":["lt"],"<=":["lte"],"!=":["equals","not"]},wordReplacements={and:"&&",or:"||"};Matcher.prototype={gt:function(a,b,c){return c=c||this,c.ok=c.ok&&this.target&&this.target[a]>b,this},gte:function(a,b,c){return c=c||this,c.ok=c.ok&&this.target&&this.target[a]>=b,this},lt:function(a,b,c){return c=c||this,c.ok=c.ok&&this.target&&this.target[a]<b,this},lte:function(a,b,c){return c=c||this,c.ok=c.ok&&this.target&&this.target[a]<=b,this},equals:function(a,b,c){c=c||this;if(c.ok&&this.target){var d=this.target[a],e=(typeof d=="string"||d instanceof String)&&(typeof b=="string"||b instanceof String);e&&!this.opts.caseSensitive?c.ok=d.toLowerCase()===b.toLowerCase():c.ok=d===b}return this},not:function(a,b,c){return c=c||this,c.ok=!c.ok,this},query:function(text){var match=reExpr.exec(text);while(match){var fns=exprLookups[match[2]]||[],result={ok:fns.length>0},val1=parseFloat(match[1])||match[1],val2=parseFloat(match[3])||match[3];reBool.test(val2)&&(val2=val2=="true");for(var ii=0,count=fns.length;ii<count;ii++){var evaluator=this[fns[ii]];evaluator&&evaluator.call(this,val1,val2,result)}text=text.slice(0,match.index)+result.ok+text.slice(match.index+match[0].length),match=reExpr.exec(text)}text=text.replace(reFalsyWords,"0").replace(reTruthyWords,"1"),match=reWords.exec(text);while(match){var replacement=wordReplacements[match[0].toLowerCase()];!replacement&&this.target&&(replacement=this.target[match[0]]),text=text.slice(0,match.index)+replacement+text.slice(match.index+match[0].length),text=text.replace(reFalsyWords,"0").replace(reTruthyWords,"1"),match=reWords.exec(text)}return this.ok=eval(text),this}},matchme.filter=function(a,b,c){var d;if(typeof a=="string"||a instanceof String)c=b,b=a,a=null;d=new Matcher(null,c);if(a){var e=[];for(var f=0,g=a.length;f<g;f++)d.target=a[f],d.query(b).ok&&(e[e.length]=a[f]);return e}return function(a){return d.target=a,d.query(b).ok}},typeof module!="undefined"&&module.exports?module.exports=matchme:typeof define!="undefined"?define("matchme",[],function(){return matchme}):glob.matchme=matchme})(this)